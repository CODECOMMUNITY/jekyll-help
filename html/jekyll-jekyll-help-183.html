<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script type="text/javascript" src="lib/jquery.js"></script>
    <script type="text/javascript" src="lib/jquery.emoji.js"></script>
    <title>Extracting metadata from markdown document</title>
  </head>
  <body>
    <div class="container">
      <header>
        <p>
          <span class="badge closed">closed</span>
          <span class="url">jekyll/jekyll-help#183</span>
        </p>
        <h1>Extracting metadata from markdown document</h1>
      </header>
      <div class="comments">
        <div class="comment">
          <div class="meta">
            <a class="person" href="https://github.com/">bloudraak</a>
            <time>Sunday, November 02, 2014</time>
          </div>
          <div class="body">
            <p>Consider a workflow where a non technical author submits works with and shares markdown documents for a website generated by Jekyll.  A sample page (regardless of its name) may have the following content:</p>
<pre><code># Lorem ipsum dolor

Nulla vitae odio quis enim gravida posuere accumsan ac turpis. Nullam
lacus nunc, placerat vitae eleifend et, tempor lacinia elit.

## Section 1

Phasellus eget blandit urna, et tincidunt lacus. Fusce sed rhoncus
ex. Nunc eget sapien facilisis, aliquam ex non, placerat enim.
Proin eget nisl eu augue ullamcorper mattis nec in velit.

Sed iaculis turpis iaculis justo rutrum, eget porttitor augue molestie. 

## Section 2

Aenean tristique lorem nec elementum aliquet. Cras imperdiet nulla quis
lobortis rutrum. Nam quis scelerisque enim. Praesent suscipit aliquam
turpis, ac ornare turpis volutpat sed.

Vivamus at eros tempus, sollicitudin turpis sed, molestie purus.
Pellentesque habitant morbi tristique senectus et netus et malesuada fames
ac turpis egestas.

## Section 3

Aenean tincidunt sapien metus, eleifend euismod nisi mollis sit amet.
Integer a sem leo. Morbi non lorem eleifend, posuere risus ac, imperdiet
neque. Cras vel sagittis turpis, sit amet placerat elit. Integer in tortor
sed felis euismod iaculis.
</code></pre><p>From the document its clear the title should be &quot;Lorem ipsum dolor&quot; and that the excerpt should be the first paragraph &quot;Nulla vitae odio quis enim gravida posuere accumsan ac turpis. Nullam lacus nunc, placerat vitae eleifend et, tempor lacinia elit.&quot;. </p>
<p>For every page I receive, I need to create or update the header which is error prone, time consuming and tedious. </p>
<pre><code>---
layout: default
title: Lorem ipsum dolor
excerpt: Nulla vitae odio quis enim gravida posuere accumsan ac turpis. Nullam
    lacus nunc, placerat vitae eleifend et, tempor lacinia elit.
---
</code></pre><p>Is there a way Jekyll can extract this information from the contents, without requiring a human to massage the document, so that page.title and page.excerpt would be derived from the contents of the page rather than the usual header? </p>

          </div>
        </div>

        <div class="comment">
          <div class="meta">
            <a class="person" href="https://github.com/troyswanson">
              troyswanson
            </a>
            <time>Sunday, November 02, 2014</time>
          </div>
          <div class="body"><p>Not really. One of the tenants of Jekyll is to do as little magic as it can get away with. In this instance, you can probably use the automatic <a href="http://jekyllrb.com/docs/posts/#post-excerpts">excerpt</a> functionality, though. For instance, from your example:</p>
<pre><code class="lang-markdown">---
layout: default
title: Lorem ipsum dolor
---

Nulla vitae odio quis enim gravida posuere accumsan ac turpis. Nullam
lacus nunc, placerat vitae eleifend et, tempor lacinia elit.

## Section 1

Phasellus eget blandit urna, et tincidunt lacus. Fusce sed rhoncus
ex. Nunc eget sapien facilisis, aliquam ex non, placerat enim.
Proin eget nisl eu augue ullamcorper mattis nec in velit.

Sed iaculis turpis iaculis justo rutrum, eget porttitor augue molestie. 

## Section 2

Aenean tristique lorem nec elementum aliquet. Cras imperdiet nulla quis
lobortis rutrum. Nam quis scelerisque enim. Praesent suscipit aliquam
turpis, ac ornare turpis volutpat sed.

Vivamus at eros tempus, sollicitudin turpis sed, molestie purus.
Pellentesque habitant morbi tristique senectus et netus et malesuada fames
ac turpis egestas.

## Section 3

Aenean tincidunt sapien metus, eleifend euismod nisi mollis sit amet.
Integer a sem leo. Morbi non lorem eleifend, posuere risus ac, imperdiet
neque. Cras vel sagittis turpis, sit amet placerat elit. Integer in tortor
sed felis euismod iaculis.
</code></pre>
<p>The excerpt for this example will be what you expected (Nulla vitae odio quis enim gravida posuere accumsan ac turpis. Nullam lacus nunc, placerat vitae eleifend et, tempor lacinia elit.). In your loop, you can use <code>post.title</code> and <code>post.excerpt</code> (assuming you&#39;re using <code>post</code> as your iterating variable).</p>
<p>Excerpts, by default, basically take the first block of text it sees.</p>
<p>It might be worth offering a little bit of training to your non-technical authors so that they can frame their markdown with the front-matter that you need.</p>
<p>I&#39;ve found this approach works pretty well for me, since my layouts put other stuff (date, author, permalink) between the title and the body of the post.</p>
<p>Hope this helps, and let us know if you need any more help.</p>
</div>
        </div>
        <div class="comment">
          <div class="meta">
            <a class="person" href="https://github.com/bloudraak">
              bloudraak
            </a>
            <time>Sunday, November 02, 2014</time>
          </div>
          <div class="body"><p>The thing is that one can infer the title from some formats, e.g. markdown or Microsoft Word.  So this is really a tradeoff of do-not-repeat-yourself and do-as-little-magic-as-possible. What I found is that the latter involves a lot of effort if you have nearly a hundred pages.  I&#39;d rather have a computer do the work.</p>
<p>The one challenge no one talks about is that markdown applications don&#39;t handle the front-matter well.  It looks out of place.</p>
<p>However, I&#39;ll try the excerpt feature.  But how about doing the same for the title, but instead of taking the first paragraph, use the first heading (be it H1, H2 or H3)?  </p>
</div>
        </div>
        <div class="comment">
          <div class="meta">
            <a class="person" href="https://github.com/troyswanson">
              troyswanson
            </a>
            <time>Sunday, November 02, 2014</time>
          </div>
          <div class="body"><p>I tend to agree with you. Added a new issue for feature discussion in jekyll/jekyll#3054</p>
</div>
        </div>
      </div>
    </div>

    <script type="text/javascript">
      $(document).ready(function(){
        $('.comment').each(function(i, d){
          $(d).emoji()
        })
      })
    </script>

  </body>
</html>
